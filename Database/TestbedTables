
CREATE TABLE SERVER( 
	Suser_name varchar(100) NOT NULL,
	Spassword varchar(100) NOT NULL,
	Sstatus varchar(100) NOT NULL,
	Sip_address BLOB NOT NULL,
	PRIMARY KEY(Suser_name)
)ENGINE=InnoDB;

CREATE TABLE REGISTERED_USER(
	Remail varchar(100) NOT NULL,
	Rpassword varchar(100) NOT NULL,
	Rfirst_name varchar(100) NOT NULL,
	Rlast_name varchar(100) NOT NULL,
	Rorganization varchar(100) NOT NULL,
	Rskill_level varchar (100) NOT NULL,
	PRIMARY KEY(Remail)
)ENGINE=InnoDB;

CREATE TABLE USER_HISTORY(
	Remail varchar(100) NOT NULL,
	Workshop varchar(100) NOT NULL,
	PRIMARY KEY(Remail,Workshop),
	FOREIGN KEY (Remail) REFERENCES REGISTERED_USER(Remail)
)ENGINE=InnoDB;

CREATE TABLE VIRTUAL_MACHINE(
	VMname varchar(100) NOT NULL,
	VMvrdp INT NOT NULL,
	VMrecent_snapshot varchar(254) NOT NULL,
	VMhost_server BLOB NOT NULL,
	PRIMARY KEY(VMname)
)ENGINE=InnoDB;

CREATE TABLE VM_NetAdapters(
	VMname varchar(100) NOT NULL,
	Network_Adapter varchar(255) NOT NULL,
	PRIMARY KEY(VMname,Network_Adapter),
	FOREIGN KEY(VMname) REFERENCES VIRTUAL_MACHINE(VMname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE WORKSHOP_UNIT(
	WUname varchar(100) NOT NULL,
	WUdescription varchar(280) NOT NULL,
	WUpersistence_session BLOB NOT NULL,
	WUhost BLOB NOT NULL,
	WUpublished_date DATE NOT NULL,
	WUstatus varchar(10) NOT NULL,
	PRIMARY KEY(WUname)
)ENGINE=InnoDB;

CREATE TABLE UNIT_VM(
	WUname varchar(100) NOT NULL,
	VMname varchar(100) NOT NULL,
	PRIMARY KEY(WUname,VMname),
	FOREIGN KEY(WUname) REFERENCES WORKSHOP_UNIT(WUname) ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY(VMname) REFERENCES VIRTUAL_MACHINE(VMname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE UNIT_REFERENCE_MATERIAL(
	WUname varchar(100) NOT NULL,
	RMtag varchar(100) NOT NULL,
	RMfile_path varchar(255) NOT NULL,
	PRIMARY KEY(WUname,RMtag),
	FOREIGN KEY(WUname) REFERENCES WORKSHOP_UNIT(WUname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE UNIT_CONNECTION_STRING(
	WUname varchar(100) NOT NULL,
	CStag varchar(100) NOT NULL,
	CSconfiguration_file BLOB NOT NULL,
	PRIMARY KEY(WUname,CStag),
	FOREIGN KEY(WUname) REFERENCES WORKSHOP_UNIT(WUname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE WORKSHOP_GROUP(
	WGname varchar(100) NOT NULL,
	WGdescription varchar(280) NOT NULL,
	WGpersistence_session BLOB NOT NULL,
	WGhost BLOB NOT NULL,
	WGstatus varchar(10) NOT NULL,
	WGpublished_date DATE NOT NULL,
	PRIMARY KEY(WGname)
)ENGINE=InnoDB;

CREATE TABLE GROUP_UNIT(
	WGname varchar(100) NOT NULL,
	WUname varchar(100) NOT NULL,
	PRIMARY KEY(WGname,WUname),
	FOREIGN KEY(WGname) REFERENCES WORKSHOP_GROUP(WGname) ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY(WUname) REFERENCES WORKSHOP_UNIT(WUname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE GROUP_REFERENCE_MATERIAL(
	WGname varchar(100) NOT NULL,
	RMtag varchar(100) NOT NULL,
	RMfile_path varchar(255) NOT NULL,
	PRIMARY KEY(WGname,RMtag),
	FOREIGN KEY(WGname) REFERENCES WORKSHOP_GROUP(WGname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;


