
CREATE TABLE SERVER( 
	Suser_name VARCHAR(100) NOT NULL,
	Spassword VARCHAR(100) NOT NULL,
	Sstatus VARCHAR(100) NOT NULL,
	Sip_address BLOB NOT NULL,
	PRIMARY KEY(Suser_name)
)ENGINE=InnoDB;

CREATE TABLE REGISTERED_USER(
	Remail VARCHAR(100) NOT NULL,
	Rpassword VARCHAR(100) NOT NULL,
	Rfirst_name VARCHAR(100) NOT NULL,
	Rlast_name VARCHAR(100) NOT NULL,
	Rorganization VARCHAR(100) NOT NULL,
	Rskill_level VARCHAR (100) NOT NULL,
	PRIMARY KEY(Remail)
)ENGINE=InnoDB;

CREATE TABLE USER_HISTORY(
	Remail VARCHAR(100) NOT NULL,
	Workshop VARCHAR(100) NOT NULL,
	PRIMARY KEY(Remail,Workshop),
	FOREIGN KEY (Remail) REFERENCES REGISTERED_USER(Remail)
)ENGINE=InnoDB;

CREATE TABLE VIRTUAL_MACHINE(
	VMname VARCHAR(100) NOT NULL,
	VMvrdp INT NOT NULL,
	VMrecent_snapshot VARCHAR(254) NOT NULL,
	VMhost_server BLOB NOT NULL,
	PRIMARY KEY(VMname)
)ENGINE=InnoDB;

CREATE TABLE VM_NetAdapters(
	VMname VARCHAR(100) NOT NULL,
	Network_Adapter VARCHAR(255) NOT NULL,
	PRIMARY KEY(VMname,Network_Adapter),
	FOREIGN KEY(VMname) REFERENCES VIRTUAL_MACHINE(VMname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE WORKSHOP_UNIT(
	WUname VARCHAR(100) NOT NULL,
	WUdescription VARCHAR(280) NOT NULL,
	WUpersistence_session BLOB NOT NULL,
	WUhost BLOB NOT NULL,
	WUpublished_date DATE NOT NULL,
	WUstatus VARCHAR(10) NOT NULL,
	PRIMARY KEY(WUname)
)ENGINE=InnoDB;

CREATE TABLE UNIT_VM(
	WUname VARCHAR(100) NOT NULL,
	VMname VARCHAR(100) NOT NULL,
	PRIMARY KEY(WUname,VMname),
	FOREIGN KEY(WUname) REFERENCES WORKSHOP_UNIT(WUname) ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY(VMname) REFERENCES VIRTUAL_MACHINE(VMname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE UNIT_REFERENCE_MATERIAL(
	WUname VARCAHR(100) NOT NULL,
	RMtag VARCHAR(100) NOT NULL,
	RMfile_path VARCHAR(255) NOT NULL,
	PRIMARY KEY(WUname,RMtag),
	FOREIGN KEY(WUname) REFERENCES WORKSHOP_UNIT(WUname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE UNIT_CONNECTION_STRING(
	WUname VARCAHR(100) NOT NULL,
	CStag VARCHAR(100) NOT NULL,
	CSconfiguration_file BLOB NOT NULL,
	PRIMARY KEY(WUname,CStag),
	FOREIGN KEY(WUname) REFERENCES WORKSHOP_UNIT(WUname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE WORKSHOP_GROUP(
	WGname VARCHAR(100) NOT NULL,
	WGdescription VARCHAR(280) NOT NULL,
	WGpersistence_session BLOB NOT NULL,
	WGhost BLOB NOT NULL,
	WGstatus VARCHAR(10) NOT NULL,
	WGpublished_date DATE NOT NULL,
	PRIMARY KEY(WGname)
)ENGINE=InnoDB;

CREATE TABLE GROUP_UNIT(
	WGname VARCHAR(100) NOT NULL,
	WUname VARCHAR(100) NOT NULL,
	PRIMARY KEY(WGname,WUname),
	FOREIGN KEY(WGname) REFERENCES WORKSHOP_GROUP(WGname) ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY(WUname) REFERENCES WORKSHOP_UNIT(WUname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;

CREATE TABLE GROUP_REFERENCE_MATERIAL(
	WGname VARCAHR(100) NOT NULL,
	RMtag VARCHAR(100) NOT NULL,
	RMfile_path VARCHAR(255) NOT NULL,
	PRIMARY KEY(WGname,RMtag),
	FOREIGN KEY(WGname) REFERENCES WORKSHOP_GROUP(WGname) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB;


